const productReviews = {
    1: {
        name: "Arbre à Chat Haut",
        rating: 5,
        title: "Rio et Vador l'adorent !",
        review: "Rio et Vador ont tout de suite adopté cet arbre à chat ! Les deux plateformes en hauteur sont parfaites pour eux, les poteaux à griffer et les petites cachettes aussi. Vador adore particulièrement le hamac ! Seul petit bémol : il arrive à décrocher les balles suspendues, et le vendeur ne propose pas encore de pièces de rechange.",
        link: "https://fr.aliexpress.com/item/1005007463308356.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    2: {
        name: "Brosse spéciale poils de chat",
        rating: 5,
        title: "Efficace et chats satisfaits",
        review: "Très satisfaits de cette brosse ! Rio adore les séances de brossage, et les poils se retirent très facilement. Par contre, dès qu’on active la vapeur, il prend peur et refuse de se laisser faire. Pour Vador, c’est un peu différent : il ne reste pas vraiment en place, mais il semble quand même apprécier la brosse à sa manière.",
        link: "https://fr.aliexpress.com/item/1005007102314234.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    3: {
        name: "Nid douillet",
        rating: 4,
        title: "Le cocon de Vador",
        review: "Ce premier lit pour Vador a tout de suite été un succès ! Il adorait s’y blottir et se faufiler à l’intérieur. Rio l’a testé aussi, mais lui préférait se poser sur le dessus du “chapeau”. Avec le temps, Vador y va beaucoup moins souvent, mais le rapport qualité-prix reste correct — on met donc 4 étoiles.",
        link: "https://fr.aliexpress.com/item/1005007550213999.html?spm=a2g0o.productlist.seoads.7.28524c3cwRRtQb&p4p_pvid=202510300703583163593132390250000088277_4&gatewayAdapt=glo2fra"
    },
    4: {
        name: "Distributeur Automatique de Croquettes",
        rating: 5,
        title: "Praticité au quotidien",
        review: "Ce distributeur de croquettes est vraiment pratique ! Il nous permet de garder un bon rythme de repas matin et soir, même quand nous partons en week-end. Plutôt que de remplir deux grandes gamelles, on peut contrôler facilement les portions que Rio et Vador mangent en notre absence. Petit bonus (parce qu’on est un peu gaga) : on a choisi le modèle avec deux gamelles et une caméra intégrée pour garder un œil sur eux. L’application de gestion est plutôt simple et fonctionne bien.",
        link: "https://fr.aliexpress.com/item/1005006750761962.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    5: {
        name: "Brosse pour chat avec manche",
        rating: 3,
        title: "Ergonomique",
        review: "Nous avons voulu tester une autre brosse, cette fois avec un manche. Elle est pratique à tenir, mais malheureusement moins efficace que celle que nous avions achetée auparavant. Elle attrape moins bien les poils, donc pour le même prix, nous préférons largement l’autre brosse.",
        link: "https://fr.aliexpress.com/item/1005007102314234.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    6: {
        name: "Fontaine à eau automatique pour chat 3L",
        rating: 5,
        title: "Hydratation garantie",
        review: "Nous avons testé plusieurs fontaines avant celle-ci, et c’est clairement notre préférée !Sa grande capacité de 3 L est très pratique : on change l’eau une fois par semaine et le filtre environ une fois par mois. Elle est quasiment silencieuse, sauf quand elle arrive presque à vide, et n’émet aucune lumière — parfait pour la nuit. Un excellent rapport qualité-prix, donc 5 étoiles bien méritées !",
        link: "https://fr.aliexpress.com/item/1005005583190954.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    7: {
        name: "Gamelle en acier inoxydable",
        rating: 5,
        title: "Durabilité et hygiène",
        review: "Gamelle inclinée pour croquettes, simple mais efficace ! Elle fait très bien son job et son design incliné semble plaire à Rio et Vador, qui mangent plus confortablement. Rien d’extraordinaire, mais pour le prix, c’est un excellent petit achat pratique et pas cher.",
        link: "https://fr.aliexpress.com/item/1005006451933326.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    8: {
        name: "Tour de jeu interactive pour chat",
        rating: 2,
        title: "Divertissement éphémère",
        review: "Ce jeu à trois niveaux avec des balles qui tournent autour a tout de suite intrigué Vador, qui y a joué avec enthousiasme au début… mais ça n’a pas duré très longtemps. Rio, lui, s’est contenté de regarder son frère s’amuser. Un petit jouet sympa, mais l’intérêt est vite retombé.",
        link: "https://fr.aliexpress.com/item/1005007144026951.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    9: {
        name: "Sac de transport pour chat",
        rating: 5,
        title: "Confort et pratique",
        review: "Ce sac de transport est parfait pour les voyages en voiture ou chez le vétérinaire. Il offre une bonne visibilité à nos chats, qui se sentent en sécurité à l'intérieur. Les fermetures éclair semblent solides et le design est élégant.",
        link: "https://fr.aliexpress.com/item/1005007541054630.html?supplyId=159831080&gatewayAdapt=glo2fra",
    },
    10: {
        name: "Canne à pêche pour chat",
        rating: 5,
        title: "Un jeu simple mais tellement apprécié",
        review: "Ce jouet a tout de suite captivé l'attention de nos chats ! La canne à pêche est légère et facile à manipuler. Rio et Vador adorent courir après et sauter pour attraper la souris. Un excellent moyen de les divertir et de renforcer notre lien avec eux.",
        link: "https://fr.aliexpress.com/item/1005004438413638.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    11: {
        name: "Bac à litière fermé",
        rating: 5,
        title: "Un espace privé qui cache bien les odeurs",
        review: "Ce bac à litière fermé a tout de suite été adopté par Rio et Vador ! Ils s’y sentent tranquilles et à l’abri des regards. Il est facile à nettoyer et limite bien les projections de litière.",
        link: "https://fr.aliexpress.com/item/1005007355640261.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    12: {
        name: "Pelle à litière",
        rating: 5,
        title: "Un indispensable pour les propriétaires de chats",
        review: "Cette pelle à litière est robuste et efficace. La pelle est assez large ce qui est bien pratique !",
        link: "https://fr.aliexpress.com/item/1005006834495148.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    13: {
        name: "Pistolet lanceur de peluches pour chat",
        rating: 5,
        title: "Excellent, on adore !",
        review: "Vador est complètement fan de ce pistolet lanceur de balles ! Tel un petit chien, il nous rapporte les balles pour qu’on les relance encore et encore. On avoue, nous aussi on adore ce jeu d’enfant !",
        link: "https://fr.aliexpress.com/item/1005007210024810.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    14: {
        name: "Balle intelligente",
        rating: 4,
        title: "Vraiment pas mal",
        review: "Ces balles intelligentes ont été une belle découverte ! Elles réveillent bien l’instinct de chasseur de nos chats d’intérieur. Petite préférence pour la verte avec la fourrure : elle bouge moins vite et plaît davantage à Rio et Vador. Celles sans fourrure sont un peu trop puissantes à notre goût et ont même tendance à leur faire un peu peur.",
        link: "https://fr.aliexpress.com/item/1005007857104752.html?supplyId=159831080&gatewayAdapt=glo2fra"
    },
    15: {
        name: "Maisonnette",
        rating: 5,
        title: "Parfait pour les siestes de la journée",
        review: "Au début ça n'a pas été le coup de foudre, mais aujourd'hui la sieste du matin c'est dedans, et celle de l'après midi... aussi !",
        link: "https://fr.aliexpress.com/item/1005010185775375.html?spm=a2g0o.productlist.main.48.68e48178jeUC17&algo_pvid=b05f5d8e-36a5-4744-8775-d67c3eae3113&algo_exp_id=b05f5d8e-36a5-4744-8775-d67c3eae3113-47&pdp_ext_f=%7B%22order%22%3A%221%22%2C%22eval%22%3A%221%22%2C%22fromPage%22%3A%22search%22%7D&pdp_npi=6%40dis%21EUR%2116.47%2116.99%21%21%21131.90%21135.97%21%402103892f17623665035663916eca3e%2112000051443482264%21sea%21FR%210%21ABX%211%210%21n_tag%3A-29910%3Bd%3A80c1762f%3Bm03_new_user%3A-29895%3BpisId%3A5000000192291271&curPageLogUid=GRY7o4vKlIPL&utparam-url=scene%3Asearch%7Cquery_from%3A%7Cx_object_id%3A1005010185775375%7C_p_origin_prod%3A"
    }
};

// Ajouter les écouteurs d'événement aux étoiles
document.querySelectorAll('.product-rating-stars').forEach(stars => {
    stars.addEventListener('click', function(e) {
        e.preventDefault();
        const productId = this.getAttribute('data-product');
        openReviewModal(productId);
    });
});

function openReviewModal(productId) {
    const review = productReviews[productId];
    if (!review) return;

    document.getElementById('modalProductName').textContent = review.name;
    document.getElementById('modalReviewTitle').textContent = review.title;
    document.getElementById('modalReviewText').textContent = review.review;
    document.getElementById('modalProductLink').href = review.link;

    // Générer les étoiles en fonction de la note
    const stars = '★'.repeat(Math.floor(review.rating)) + '☆'.repeat(5 - Math.floor(review.rating));
    document.querySelector('.modal-rating-stars').textContent = stars;

    document.getElementById('reviewModal').classList.add('active');
}

function closeReviewModal() {
    document.getElementById('reviewModal').classList.remove('active');
}

// Fermer le modal en cliquant en dehors
document.getElementById('reviewModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeReviewModal();
    }
});

// Fermer le modal avec la touche Échap
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeReviewModal();
    }
});


// Trier les produits par note
// Ordre original des produits
let originalOrder = [];

// Sauvegarder l'ordre original au chargement
document.addEventListener('DOMContentLoaded', function() {
    const grid = document.getElementById('productsGrid');
    originalOrder = Array.from(grid.querySelectorAll('.product-card'));
});

function sortProducts() {
    const sortValue = document.getElementById('sortSelect').value;
    const grid = document.getElementById('productsGrid');
    const cards = Array.from(grid.querySelectorAll('.product-card'));

    if (sortValue === 'default') {
        // Retourner à l'ordre original
        cards.sort((a, b) => {
            return originalOrder.indexOf(a) - originalOrder.indexOf(b);
        });
    } else if (sortValue === 'high-to-low') {
        cards.sort((a, b) => {
            const ratingA = parseFloat(a.querySelector('.product-rating').getAttribute('data-rating'));
            const ratingB = parseFloat(b.querySelector('.product-rating').getAttribute('data-rating'));
            return ratingB - ratingA;
        });
    } else if (sortValue === 'low-to-high') {
        cards.sort((a, b) => {
            const ratingA = parseFloat(a.querySelector('.product-rating').getAttribute('data-rating'));
            const ratingB = parseFloat(b.querySelector('.product-rating').getAttribute('data-rating'));
            return ratingA - ratingB;
        });
    }

    // Réinsérer les cartes triées
    cards.forEach(card => {
        grid.appendChild(card);
    });
}
